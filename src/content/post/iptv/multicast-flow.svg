<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>

  <text x="400" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">Multicast (组播) vs Unicast (udpxy 单播) 流量流向</text>

  <!-- Section 1: Traditional Multicast -->
  <g transform="translate(0, 50)">
    <text x="150" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#333">传统 IPTV 模式 (组播)</text>
    
    <rect x="50" y="60" width="80" height="60" rx="5" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
    <text x="90" y="95" text-anchor="middle" font-size="12">ISP Source</text>
    <text x="90" y="110" text-anchor="middle" font-size="10">239.x.x.x</text>

    <line x1="130" y1="90" x2="250" y2="90" stroke="#4caf50" stroke-width="4" marker-end="url(#arrowhead)"/>
    <text x="190" y="80" text-anchor="middle" font-size="12" fill="#4caf50">UDP Stream</text>

    <!-- STB -->
    <rect x="250" y="60" width="80" height="60" rx="5" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
    <text x="290" y="95" text-anchor="middle" font-size="12">机顶盒 (STB)</text>
    
    <text x="290" y="140" text-anchor="middle" font-size="12" fill="#555" font-style="italic">必须物理连接 ITV 口</text>
  </g>

  <line x1="10" y1="200" x2="790" y2="200" stroke="#ccc" stroke-dasharray="4,4"/>

  <!-- Section 2: udpxy Relay -->
  <g transform="translate(0, 220)">
    <text x="150" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#333">udpxy 模式 (组播转单播)</text>

    <!-- Source -->
    <rect x="50" y="80" width="80" height="60" rx="5" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
    <text x="90" y="115" text-anchor="middle" font-size="12">ISP Group</text>
    <text x="90" y="130" text-anchor="middle" font-size="10">239.1.1.1:5000</text>

    <!-- Multicast Join -->
    <path d="M130,110 L190,110" stroke="#4caf50" stroke-width="4" marker-end="url(#arrowhead)"/>
    
    <!-- Router with udpxy -->
    <rect x="250" y="60" width="120" height="100" rx="5" fill="#eceff1" stroke="#607d8b" stroke-width="2"/>
    <text x="310" y="85" text-anchor="middle" font-weight="bold" font-size="14">Router</text>
    <rect x="260" y="95" width="100" height="50" rx="3" fill="#fff" stroke="#333"/>
    <text x="310" y="115" text-anchor="middle" font-size="12" font-weight="bold">udpxy</text>
    <text x="310" y="135" text-anchor="middle" font-size="10" fill="#666">IGMP Join -> UDP Recv</text>

    <!-- HTTP Streams -->
    <path d="M370,110 L480,80" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
    <path d="M370,110 L480,110" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
    <path d="M370,110 L480,140" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>

    <text x="420" y="70" text-anchor="middle" font-size="10" fill="#1976d2">HTTP (TCP)</text>

    <!-- Devices -->
    <rect x="480" y="60" width="60" height="30" rx="3" fill="#f5f5f5" stroke="#333"/>
    <text x="510" y="80" text-anchor="middle" font-size="10">Phone</text>

    <rect x="480" y="95" width="60" height="30" rx="3" fill="#f5f5f5" stroke="#333"/>
    <text x="510" y="115" text-anchor="middle" font-size="10">PC</text>

    <rect x="480" y="130" width="60" height="30" rx="3" fill="#f5f5f5" stroke="#333"/>
    <text x="510" y="150" text-anchor="middle" font-size="10">AppleTV</text>
  </g>
</svg>
